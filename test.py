from td_api import Account
import json
import pandas as pd

account = Account("keys.json")

df = account.history("AMD", 15, 365)
print(df)

# string = "[{'open': 52.58, 'high': 53.28, 'low': 52.4128, 'close': 52.8, 'volume': 3847350, 'datetime': 1592227800000}, {'open': 52.79, 'high': 53.75, 'low': 52.58, 'close': 53.7441, 'volume': 3635699, 'datetime': 1592228700000}, {'open': 53.7471, 'high': 54.08, 'low': 53.52, 'close': 53.86, 'volume': 3642933, 'datetime': 1592229600000}, {'open': 53.86, 'high': 54.3, 'low': 53.7327, 'close': 53.895, 'volume': 2842444, 'datetime': 1592230500000}, {'open': 53.885, 'high': 53.9, 'low': 53.38, 'close': 53.54, 'volume': 2399678, 'datetime': 1592231400000}, {'open': 53.54, 'high': 53.82, 'low': 53.33, 'close': 53.395, 'volume': 2313437, 'datetime': 1592232300000}, {'open': 53.4, 'high': 53.62, 'low': 53.34, 'close': 53.455, 'volume': 2190577, 'datetime': 1592233200000}, {'open': 53.45, 'high': 53.46, 'low': 53.11, 'close': 53.225, 'volume': 2031704, 'datetime': 1592234100000}, {'open': 53.23, 'high': 53.38, 'low': 53.01, 'close': 53.21, 'volume': 1647338, 'datetime': 1592235000000}, {'open': 53.21, 'high': 53.385, 'low': 52.99, 'close': 53.13, 'volume': 1558299, 'datetime': 1592235900000}, {'open': 53.13, 'high': 53.75, 'low': 53.08, 'close': 53.64, 'volume': 1955852, 'datetime': 1592236800000}, {'open': 53.65, 'high': 53.85, 'low': 53.6404, 'close': 53.69, 'volume': 1350222, 'datetime': 1592237700000}, {'open': 53.6943, 'high': 53.9, 'low': 53.565, 'close': 53.835, 'volume': 1114806, 'datetime': 1592238600000}, {'open': 53.835, 'high': 53.95, 'low': 53.57, 'close': 53.74, 'volume': 1095532, 'datetime': 1592239500000}, {'open': 53.74, 'high': 53.77, 'low': 53.5, 'close': 53.7275, 'volume': 1392586, 'datetime': 1592240400000}, {'open': 53.7223, 'high': 53.92, 'low': 53.685, 'close': 53.771, 'volume': 1104620, 'datetime': 1592241300000}, {'open': 53.775, 'high': 53.98, 'low': 53.72, 'close': 53.82, 'volume': 1029853, 'datetime': 1592242200000}, {'open': 53.82, 'high': 53.8915, 'low': 53.7186, 'close': 53.8281, 'volume': 670473, 'datetime': 1592243100000}, {'open': 53.825, 'high': 54.3, 'low': 53.82, 'close': 54.13, 'volume': 2529620, 'datetime': 1592244000000}, {'open': 54.12, 'high': 54.6, 'low': 54.12, 'close': 54.58, 'volume': 2614189, 'datetime': 1592244900000}, {'open': 54.58, 'high': 54.73, 'low': 54.4001, 'close': 54.57, 'volume': 1789869, 'datetime': 1592245800000}, {'open': 54.58, 'high': 54.7001, 'low': 54.51, 'close': 54.53, 'volume': 1414005, 'datetime': 1592246700000}, {'open': 54.52, 'high': 54.71, 'low': 54.451, 'close': 54.59, 'volume': 1226087, 'datetime': 1592247600000}, {'open': 54.5931, 'high': 54.67, 'low': 54.24, 'close': 54.265, 'volume': 1349833, 'datetime': 1592248500000}, {'open': 54.26, 'high': 54.43, 'low': 54.11, 'close': 54.38, 'volume': 1766939, 'datetime': 1592249400000}, {'open': 54.38, 'high': 54.71, 'low': 54.3, 'close': 54.69, 'volume': 2460485, 'datetime': 1592250300000}]"
# string = "[{'open': '52.58', 'high': '53.28', 'low': '52.4128', 'close': '52.8', 'volume': '3847350', 'datetime': '1592227800000'}]"
# string = '[{"col 1":"a","col 2":"b"},{"col 1":"c","col 2":"d"}]'
# print(pd.read_json(string, orient="records"))
